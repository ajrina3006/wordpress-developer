pipeline {
    agent any

    stages {
        stage('Pull Latest Code') {
            steps {
                git branch: 'main',
                    url: 'https://github.com/ajrina3006/wordpress-developer.git'
            }
        }

        stage('Sync WP Content') {
            steps {
                // Gunakan opsi aman agar tidak error permission
                sh 'rsync -av --delete --no-g --no-o wp-content/ /var/www/html/wp-content/'
            }
        }

        stage('Reload Apache') {
            steps {
         
                sh 'sudo systemctl reload apache2 || true'
            }
        }
    }
}

